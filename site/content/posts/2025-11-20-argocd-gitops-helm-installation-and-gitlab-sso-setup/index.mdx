---
featured: true
title: Argo CD å¯¦æˆ°ç­†è¨˜ï¼šå¾ Helm å®‰è£åˆ°æå®š GitLab SSO
slug: argocd-gitops-helm-installation-and-gitlab-sso-setup
category: DevOps
thumbnail: argocd-gitops-helm-installation-and-gitlab-sso-setup.png
date: 2025-11-20 10:00:00 +0800
tags: ['Kubernetes', 'Argo CD', 'GitOps', 'Helm', 'GitLab', 'DevOps']
description: æ‰‹æŠŠæ‰‹ç´€éŒ„å¦‚ä½•ç”¨ Helm æ¶è¨­ Argo CDï¼Œä¸¦ä¸²æ¥ GitOps èˆ‡ GitLab SSOã€‚å‘Šåˆ¥æ‰‹å‹• kubectlï¼Œè®“ K8s éƒ¨ç½²è‡ªå‹•åŒ–ä¸”å¯è¿½æº¯ã€‚
author: Mark Ku
---

## ç‚ºä»€éº¼é¸æ“‡ Argo CD + GitOpsï¼Ÿ

å¦‚æœæ‰‹é‚Šåªæœ‰ä¸€å€‹ K8s å¢é›†ï¼Œæ›´æ–°é »ç‡ä¸é«˜ï¼Œä½¿ç”¨ `kubectl apply` æ‰‹å‹•éƒ¨ç½²å…¶å¯¦å°±è¶³å¤ äº†ã€‚ä½†ç•¶æ¶æ§‹è¦æ¨¡æ“´å¤§ï¼Œé‡åˆ°ä»¥ä¸‹å ´æ™¯æ™‚ï¼Œæ‰‹å‹•æ“ä½œå°±æœƒé–‹å§‹é¡¯å¾—æ‰è¥Ÿè¦‹è‚˜ï¼š

- éœ€è¦ç®¡ç† **10ï½20 å€‹ K8s å¢é›†**ï¼ˆåŒ…å« Dev/Staging/Prod ç­‰å¤šé‡ç’°å¢ƒï¼‰
- é »ç¹åˆ‡æ› `kubectl context` å®¹æ˜“å°è‡´æ“ä½œå¤±èª¤
- æ‰‹å‹• Apply å¾Œï¼Œé›£ä»¥ç¢ºèªå¢é›†ç•¶ä¸‹çš„ç‹€æ…‹æ˜¯å¦èˆ‡ç‰ˆæ§ä¸€è‡´

é€™æ™‚å€™ï¼Œå¼•å…¥ **GitOps + Argo CD** å°±èƒ½æœ‰æ•ˆè§£æ±ºé€™äº›ç—›é»ã€‚

å…¶æ ¸å¿ƒé‚è¼¯éå¸¸ç›´è§€ï¼š**ã€Œå°‡éƒ¨ç½²çš„æ“ä½œè‡ªå‹•åŒ–ï¼Œæ¸›å°‘äººç‚ºä»‹å…¥ã€**ã€‚

- **Git ä½œç‚ºå–®ä¸€ä¿¡ä»»ä¾†æº (Source of Truth)**ï¼šæ‰€æœ‰çš„ YAMLã€Helm values éƒ½æ‡‰ç´å…¥ Git ç‰ˆæœ¬æ§åˆ¶ã€‚
- **Argo CD è² è²¬è‡ªå‹•åŒæ­¥**ï¼šå®ƒæœƒæŒçºŒç›£æ§ Git å€‰åº«ï¼Œä¸€æ—¦ç¨‹å¼ç¢¼æœ‰è®Šæ›´ï¼Œä¾¿è‡ªå‹•å°‡å¢é›†ç‹€æ…‹åŒæ­¥è‡³é æœŸç‹€æ…‹ã€‚
- **å¿«é€Ÿå›æ»¾**ï¼šè‹¥éƒ¨ç½²ç™¼ç”Ÿå•é¡Œï¼Œåªéœ€åœ¨ Git é€²è¡Œ Revertï¼ŒArgo CD ä¾¿æœƒå”åŠ©åˆ‡å›ä¸Šä¸€ç‰ˆï¼Œç¢ºä¿ç’°å¢ƒç©©å®šã€‚

é€™ç¯‡ç­†è¨˜ä¸»è¦ç´€éŒ„å»ºç½®é€™å¥—æµç¨‹çš„é—œéµæ­¥é©Ÿï¼ŒåŒ…å«ï¼šä½¿ç”¨ Helm å®‰è£ Argo CDã€è¨­å®š GitLab SSOï¼Œä»¥åŠå¦‚ä½•å¦¥å–„è¦åŠƒæ¬Šé™ç®¡ç†ã€‚

---

## GitOps æ ¸å¿ƒæ¦‚å¿µ

é€™é‚Šä¸è«‡å¤ªå¤šç†è«–ï¼Œä½†æœ‰ä¸€å€‹è§€å¿µè‡³é—œé‡è¦ã€‚

å‚³çµ±çš„éƒ¨ç½²æ–¹å¼å¾€å¾€ç¼ºä¹æ¨™æº–åŒ–ï¼Œæ¯å€‹äººæ‰‹å‹• apply çš„å…§å®¹å¯èƒ½ä¸ç›¡ç›¸åŒï¼Œä¹…è€Œä¹…ä¹‹ç’°å¢ƒæœƒç”¢ç”Ÿã€Œæ¼‚ç§»ã€ (Drift)ï¼Œé›£ä»¥è¿½æº¯ã€‚
GitOps å°‡ Git è¦–ç‚ºã€Œæ¨™æº– SOPã€ï¼Œè€Œ Argo CD å‰‡æ˜¯åŸ·è¡Œè€…ã€‚å®ƒæœƒç¢ºä¿å¢é›†çš„å¯¦éš›ç‹€æ…‹ (Live State) æ°¸é èˆ‡ Git å€‰åº«ä¸­çš„å®šç¾© (Desired State) ä¿æŒä¸€è‡´ã€‚å¦‚æœæœ‰äººæ‰‹å‹•ä¿®æ”¹äº†å¢é›†è³‡æºï¼ŒArgo CD æœƒåµæ¸¬åˆ°å·®ç•°ä¸¦æ¨™ç¤ºç‚º OutOfSyncï¼Œç”šè‡³å¯ä»¥è¨­å®šè‡ªå‹•ä¿®å¾© (Self-healing) å°‡å…¶é‚„åŸã€‚

ç†è§£é€™é»å¾Œï¼Œæ¥ä¸‹ä¾†çš„è¨­å®šæ­¥é©Ÿæœƒæ›´æœ‰è„ˆçµ¡ã€‚

> ï¼ˆå‰ç½®ä½œæ¥­å¦‚ Helm Repo æ·»åŠ é€™è£¡å°±è·³éäº†ï¼Œç›´æ¥é€²å…¥ SSO å’Œæ¬Šé™è¨­å®šçš„é‡é ­æˆ²ï¼‰


## å¯¦ä½œé–‹å§‹ï¼šæå®šèªè­‰èˆ‡å®‰è£

### Step 1ï¼šæº–å‚™ Helm ç’°å¢ƒ

é€™æ­¥å¾ˆç°¡å–®ï¼Œå…ˆæŠŠ Helm çš„ repo åŠ é€²ä¾†ï¼Œç„¶å¾ŒæŠŠ Argo CD çš„é è¨­ values.yaml åŒ¯å‡ºä¾†ï¼Œç­‰ç­‰ç›´æ¥æ”¹ã€‚

```bash
# æ–°å¢ Helm repository
helm repo add argo https://argoproj.github.io/argo-helm
helm repo update

# åŒ¯å‡ºé è¨­ values ä¾›ä¿®æ”¹ä½¿ç”¨
helm show values argo/argo-cd --version 8.3.2 > values.yaml
```

### Step 2ï¼šå»ºç«‹ GitLab OAuth Application

é€™ä¸€æ­¥æ˜¯ç‚ºäº†å»ºç«‹ Argo CD èˆ‡ GitLab ä¹‹é–“çš„ä¿¡ä»»é—œä¿‚ã€‚é€éåœ¨ GitLab è¨­å®š Applicationï¼Œè®“ä½¿ç”¨è€…èƒ½ç›´æ¥ä½¿ç”¨ GitLab å¸³è™Ÿç™»å…¥ Argo CDï¼Œä¾¿æ–¼å¸³è™Ÿçµ±ä¸€ç®¡ç†ã€‚

1. ç™»å…¥ GitLab â†’ å³ä¸Šè§’é ­åƒ â†’ `Settings â†’ Applications`
2. æ–°å¢ Applicationï¼š
  - **Name**ï¼š`ArgoCD SSO`
  - **Redirect URI**ï¼š`http://<your-node-ip>:32009/api/dex/callback`
  - **Scopes**ï¼šå‹¾ `openid`, `read_user`, `email`
3. å„²å­˜å¾Œæ‹¿åˆ° **Application ID** å’Œ **Secret**

> âš ï¸ è¨˜å¾— Client ID å’Œ Secret ä¸è¦ä¸Ÿé€² Git å€‰åº«ã€‚

![](attachments/5a1836e9-f936-4e9c-9762-55b5eb67285e.png " =1548x674")

**è¨­å®šæ–¹å¼æœ‰å…©ç¨®ï¼š**

A. ç›´æ¥å¯«é€² values.yamlï¼ˆæ¨è–¦ï¼Œæ–¹ä¾¿è‡ªå‹•åŒ–ï¼‰
B. å®‰è£å®Œå¾Œé€² Argo CD UI è£œè¨­å®šï¼ˆé©åˆè‡¨æ™‚èª¿æ•´ï¼‰

![](attachments/b8ce9bbd-f83d-4715-96e8-ca016638d3ef.png " =1874x907")


### Step 3ï¼šå»ºç«‹ GitLab Group Access Token

Argo CD éœ€è¦å­˜å– Git å€‰åº«çš„æ¬Šé™ä¾†æ‹‰å–ç¨‹å¼ç¢¼ã€‚
å¼·çƒˆå»ºè­°**ä¸è¦ä½¿ç”¨å€‹äººå¸³è™Ÿ**çš„ Tokenï¼Œä»¥å…äººå“¡ç•°å‹•æˆ–å¯†ç¢¼è®Šæ›´å°è‡´æ­£å¼ç’°å¢ƒçš„éƒ¨ç½²ä¸­æ–·ã€‚æœ€ä½³å¯¦è¸æ˜¯ç”³è«‹ä¸€å€‹å°ˆç”¨çš„ **Group Access Token**ã€‚

1. åˆ°ä½ çš„ GitLab Group é é¢ â†’ `Settings` â†’ `Access Tokens`ã€‚
2. å»ºç«‹ä¸€å€‹ Tokenï¼š
  - **Name**ï¼šå–å€‹å¥½èªçš„ï¼Œä¾‹å¦‚ `argocd-group-readonly`
  - **Scopes**ï¼šå‹¾é¸ `read_repository` å’Œ `read_api` å°±å¥½ï¼Œæ¬Šé™è¶Šå°è¶Šå®‰å…¨ã€‚
  - **Role**ï¼šé¸ `Reporter`ï¼ˆèƒ½è®€å°±å¥½ï¼‰ã€‚
3. **é‡é»**ï¼šToken ç”¢ç”Ÿå¾Œé¦¬ä¸Šè¤‡è£½ä¸‹ä¾†ï¼ŒGitLab åªæœƒé¡¯ç¤ºé€™ä¸€æ¬¡ã€‚


### Step 4ï¼šæ’°å¯« values.yaml

é€™æ˜¯é—œéµçš„ä¸€æ­¥ã€‚æˆ‘å€‘æœƒå»ºç«‹ä¸€ä»½è‡ªå®šç¾©çš„ `values.yaml`ï¼Œå°‡å‰é¢å–å¾—çš„ SSO å’Œ Repo è³‡è¨Šå¡«å…¥ï¼Œè¦†è“‹ Helm çš„é è¨­è¨­å®šã€‚

```yaml
configs:
  cm:
    # é€™è£¡å¡« Argo CD çš„å…¥å£ç¶²å€ï¼ŒSSO callback æœƒç”¨åˆ°
    url: http://<your-node-ip>:32009
    
    # é€™æ˜¯æœ€å®¹æ˜“å¡é—œçš„åœ°æ–¹ï¼šDex (SSO) è¨­å®š
    dex.config: |
      connectors:
        - type: gitlab
          id: gitlab
          name: GitLab
          config:
            baseURL: https://gitlab.example.com
            clientID: <your-gitlab-oauth-client-id>
            clientSecret: <your-gitlab-oauth-client-secret>
            # è¨˜å¾—è¦å» GitLab Application è¨­å®šè£¡æŠŠé€™å€‹ Callback URL å¡«å°
            redirectURI: http://<your-node-ip>:32009/api/dex/callback
  
  # é€™è£¡æŠŠå‰›å‰›ç”³è«‹çš„ Token å¡«é€²å»ï¼Œè®“ Argo CD èªå¾—ä½ çš„ GitLab
  credentialTemplates:
    gitlab-group-token:
      url: https://gitlab.example.com
      username: oauth2  # å›ºå®šå¯« oauth2 å³å¯
      password: <your-gitlab-group-access-token>
  
  # é å…ˆè¨»å†Š Repoï¼Œçœå¾—ä¹‹å¾Œåœ¨ UI ä¸€å€‹ä¸€å€‹åŠ 
  repositories:
    kong-api-gateway:
      url: https://gitlab.example.com/your-group/kong-api-gateway.git
      type: git
    argocd-deployment:
      url: https://gitlab.example.com/your-group/argocd-deployment.git
      type: git

# Server ç¶²è·¯è¨­å®š (Lab ç’°å¢ƒå·æ‡¶ç”¨ NodePortï¼Œæ­£å¼ç’°å¢ƒè«‹ä¸Š Ingress)
server:
  service:
    type: NodePort
    nodePortHttp: 32009
    nodePortHttps: 32010
  
  # é–‹ç™¼ç’°å¢ƒå…è¨± HTTPï¼Œä¸ç„¶æœƒä¸€ç›´è·³æ†‘è­‰éŒ¯èª¤
  extraArgs:
    - --insecure
```

> ğŸ’¡ ç”Ÿç”¢ç’°å¢ƒå»ºè­°ï¼šIngress + TLS å–ä»£ NodePortï¼Œä¸¦ç§»é™¤ `--insecure`ã€‚


### Step 5ï¼šå®‰è£ Argo CD

è¨­å®šæª”éƒ½æº–å‚™å¥½å¾Œï¼Œç›´æ¥é–‹å·¥ï¼š

```bash
# å®‰è£ Argo CD
helm upgrade --install homelab-argo argo/argo-cd \
  --version 8.3.2 \
  -f values.yaml \
  -n argocd --create-namespace

# ç­‰ Pod è·‘èµ·ä¾†
kubectl wait --for=condition=ready pod \
  -l app.kubernetes.io/name=argocd-server \
  -n argocd --timeout=300s

# æ‹¿åˆå§‹ admin å¯†ç¢¼
kubectl -n argocd get secret argocd-initial-admin-secret \
  -o jsonpath="{.data.password}" | base64 -d
```

ç¬¬ä¸€æ¬¡ç™»å…¥è¨˜å¾—é¦¬ä¸Šæ”¹ admin å¯†ç¢¼ã€‚

---


## æ¬Šé™ç®¡ç†

### Step 6ï¼šè¨­å®š RBAC è·Ÿ AppProject

Argo CD å®‰è£å®Œæˆå¾Œï¼Œé‚„éœ€è¦å®šç¾©ã€Œèª°å¯ä»¥ç®¡ç†å“ªäº›è³‡æºã€ä»¥åŠã€Œå¯ä»¥éƒ¨ç½²åˆ°å“ªäº›å¢é›†ã€ã€‚AppProject æ©Ÿåˆ¶é¡ä¼¼æ–¼æ¬Šé™ç™½åå–®ï¼Œè‹¥æœªæ­£ç¢ºè¨­å®šï¼ŒArgo CD å°‡ç„¡æ³•é€²è¡Œä»»ä½•éƒ¨ç½²æ“ä½œã€‚

å»ºç«‹ `argocd-projects.yaml`ï¼š

```yaml
apiVersion: v1
kind: List
items:
# Default Project - åŸºæœ¬æ¬Šé™
- apiVersion: argoproj.io/v1alpha1
  kind: AppProject
  metadata:
    name: default
    namespace: argocd
  spec:
    # å…è¨±æ‰€æœ‰ä¾†æº repo
    sourceRepos:
    - '*'
    
    # å…è¨±éƒ¨ç½²åˆ°æ‰€æœ‰å¢é›†èˆ‡ namespace
    destinations:
    - namespace: '*'
      server: '*'
    
    # å…è¨±æ“ä½œé›†ç¾¤ç´šè³‡æº
    clusterResourceWhitelist:
    - group: '*'
      kind: '*'
    
    # å…è¨±æ“ä½œå‘½åç©ºé–“ç´šè³‡æº
    namespaceResourceWhitelist:
    - group: '*'
      kind: '*'

# è‡ªè¨‚ Project - ä¾éœ€æ±‚èª¿æ•´
- apiVersion: argoproj.io/v1alpha1
  kind: AppProject
  metadata:
    name: your-project
    namespace: argocd
  spec:
    description: ä½ çš„å°ˆæ¡ˆæè¿°
    
    sourceRepos:
    - 'https://gitlab.example.com/your-group/*'
    
    destinations:
    - namespace: '*'
      server: https://kubernetes.default.svc
    
    # é›†ç¾¤ç´šè³‡æºç™½åå–®
    clusterResourceWhitelist:
    - group: ''
      kind: Namespace
    - group: 'rbac.authorization.k8s.io'
      kind: ClusterRole
    - group: 'rbac.authorization.k8s.io'
      kind: ClusterRoleBinding
    - group: 'apiextensions.k8s.io'
      kind: CustomResourceDefinition
    
    # å‘½åç©ºé–“ç´šè³‡æºç™½åå–®
    namespaceResourceWhitelist:
    - group: ''
      kind: ConfigMap
    - group: ''
      kind: Secret
    - group: ''
      kind: Service
    - group: ''
      kind: ServiceAccount
    - group: 'apps'
      kind: Deployment
    - group: 'apps'
      kind: StatefulSet
    - group: 'batch'
      kind: Job
    - group: 'batch'
      kind: CronJob
    - group: 'networking.k8s.io'
      kind: Ingress

# Argo CD Controller é¡å¤–çš„ RBAC æ¬Šé™ï¼ˆæ”¯æ´ metrics-server ç­‰ï¼‰
- apiVersion: rbac.authorization.k8s.io/v1
  kind: ClusterRole
  metadata:
    name: argocd-application-controller-auth-delegator
    labels:
      app.kubernetes.io/component: application-controller
      app.kubernetes.io/name: argocd-application-controller
      app.kubernetes.io/part-of: argocd
  rules:
  # Auth delegation for metrics-server
  - apiGroups: ["authentication.k8s.io"]
    resources: ["tokenreviews"]
    verbs: ["create"]
  - apiGroups: ["authorization.k8s.io"]
    resources: ["subjectaccessreviews"]
    verbs: ["create"]
  # API Services management
  - apiGroups: ["apiregistration.k8s.io"]
    resources: ["apiservices"]
    verbs: ["get", "list", "watch", "create", "update", "patch", "delete"]

- apiVersion: rbac.authorization.k8s.io/v1
  kind: ClusterRoleBinding
  metadata:
    name: argocd-application-controller-auth-delegator
  roleRef:
    apiGroup: rbac.authorization.k8s.io
    kind: ClusterRole
    name: argocd-application-controller-auth-delegator
  subjects:
  - kind: ServiceAccount
    name: argocd-application-controller
    namespace: argocd
```


### å¥—ç”¨è¨­å®š

```bash
# å¥—ç”¨ AppProject è·Ÿ RBAC è¨­å®š
kubectl apply -f argocd-projects.yaml -n argocd

# çœ‹ Project æœ‰æ²’æœ‰å»ºèµ·ä¾†
kubectl get appprojects -n argocd

# RBAC æ¬Šé™ä¹ŸæŸ¥ä¸€ä¸‹
kubectl get clusterrole | grep argocd
kubectl get clusterrolebinding | grep argocd
```


### æ¬Šé™çµæ§‹å°æŠ„

Argo CD èˆ‡ GitLab æ•´åˆæ™‚ï¼Œæ¬Šé™ä¸»è¦åˆ†ç‚ºä¸‰å€‹å±¤æ¬¡ï¼š

1. **SSO ç™»å…¥ï¼ˆGitLab OAuthï¼‰**ï¼šç®¡ç†ä½¿ç”¨è€…èº«åˆ†ï¼Œæ±ºå®šèª°èƒ½ç™»å…¥ Argo CD UIã€‚
2. **Repo å­˜å–ï¼ˆGroup Access Tokenï¼‰**ï¼šç®¡ç†ç¨‹å¼ç¢¼å­˜å–æ¬Šï¼Œè®“ Argo CD èƒ½è®€å– GitLab repoã€‚
3. **Registryï¼ˆé¸ç”¨ï¼‰**ï¼šç®¡ç†æ˜ åƒæª”å»æ¬Šï¼Œè‹¥éœ€æ‹‰å– private image éœ€é¡å¤–è¨­å®š Deploy Tokenã€‚

> ğŸ’¡ SSO ç®¡ã€Œäººã€ã€Group Token ç®¡ã€Œç¨‹å¼ç¢¼ã€ã€Registry Token ç®¡ã€Œæ˜ åƒæª”ã€ã€‚

![](attachments/b8ce9bbd-f83d-4715-96e8-ca016638d3ef.png " =1874x907")

---


## å¯¦æˆ°ç¯„ä¾‹

### æ‡‰ç”¨ç¨‹å¼ç‹€æ…‹ç¸½è¦½

![](attachments/37293e96-21b9-4734-b8b8-8f657ecd65e6.png)

é€™å¼µåœ–æ˜¯ [Argo CD](https://argo-cd.readthedocs.io/en/stable/) çš„ Application ç‹€æ…‹é ï¼Œä¸»è¦è§€å¯Ÿä»¥ä¸‹é‡é»æŒ‡æ¨™ï¼š

- **æ‡‰ç”¨ç¨‹å¼åç¨±ï¼š** `testapp`
- **APP HEALTHï¼š** âœ… **Healthy**ï¼Œè¡¨ç¤ºæ‰€æœ‰è³‡æºçš†æ­£å¸¸é‹è¡Œã€‚
- **SYNC STATUSï¼š** âœ… **Synced to HEAD**ï¼Œè¡¨ç¤º Git ä¸­çš„è¨­å®šå·²å®Œå…¨åŒæ­¥è‡³å¢é›†ã€‚
- **LAST SYNCï¼š** âœ… **Sync OK**ï¼Œæœ€è¿‘ä¸€æ¬¡åŒæ­¥æˆåŠŸã€‚
- **Auto syncï¼š** âŒ æœªé–‹å•Ÿè‡ªå‹•åŒæ­¥ã€‚

---

### ğŸŒ³ æ‡‰ç”¨ç¨‹å¼è³‡æºæ¶æ§‹åœ–è§£

ç”¨ GitOps éƒ¨ç½²çš„ K8s è³‡æºæ¨¹å¤§è‡´é•·é€™æ¨£ï¼š

1. **testappï¼ˆApplicationï¼‰**
   * **nginx-contentï¼ˆConfigMapï¼‰**
   * **test-appï¼ˆNamespaceï¼‰**
   * **nginx-test-serviceï¼ˆServiceï¼‰**
   * **nginx-testï¼ˆDeploymentï¼‰**
     * **nginx-test-554867cd4bï¼ˆReplicaSetï¼‰**
       * **nginx-test-554867cd4b-65gtpï¼ˆPodï¼‰**
       * **nginx-test-554867cd4b-xgs9xï¼ˆPodï¼‰**

ğŸ“Œ åªè¦å³ä¸Šè§’é¡¯ç¤ºç‚º âœ… ç¶ è‰²ç‹€æ…‹ï¼Œå³ä»£è¡¨éƒ¨ç½²æˆåŠŸã€‚

---


## å¸¸ç”¨æŒ‡ä»¤é€ŸæŸ¥
é€™è£¡æ•´ç†äº†æ—¥å¸¸ç¶­é‹å¯èƒ½ç”¨åˆ°çš„æŒ‡ä»¤ï¼Œæ–¹ä¾¿å¿«é€ŸæŸ¥é–±ã€‚

### Helm ç›¸é—œ

```bash
# å®‰è£ Helmï¼ˆWindowsï¼‰
choco install kubernetes-helm

# å®‰è£/å‡ç´š Argo CD
helm upgrade --install argocd argo/argo-cd \
  --namespace argocd --create-namespace \
  -f values.yaml

# åŒ¯å‡ºç›®å‰è¨­å®š
helm get values argocd -n argocd -o yaml > current-values.yaml
```

### K8s é™¤éŒ¯èˆ‡è¨­å®šæŒ‡ä»¤

```bash
# æŸ¥è©¢ Argo CD Service
kubectl get svc argocd-server -n argocd

# Service æ”¹æˆ NodePort
kubectl patch svc argocd-server -n argocd -p '{
  "spec": {
    "type": "NodePort",
    "ports": [
      {
        "port": 80,
        "targetPort": 8080,
        "nodePort": 32009
      }
    ]
  }
}'

# æ‹¿åˆå§‹ admin å¯†ç¢¼
kubectl -n argocd get secret argocd-initial-admin-secret \
  -o jsonpath="{.data.password}" | base64 -d

# åŒ¯å‡º AppProject è¨­å®š
kubectl get appprojects -n argocd -o yaml > argocd-projects.yaml
```

> âš ï¸ admin å¯†ç¢¼æ‹¿åˆ°å¾Œï¼Œè¨˜å¾—é¦¬ä¸Šæ”¹æ‰ã€‚

---

## åƒè€ƒè³‡æ–™

- [Argo CD å®˜æ–¹æ–‡ä»¶](https://argo-cd.readthedocs.io/)
- [Argo CD Helm Chart](https://github.com/argoproj/argo-helm)
- [GitLab OAuth è¨­å®š](https://docs.gitlab.com/ee/integration/oauth_provider.html)
- [Argo CD å¯¦ä½œç¯„ä¾‹](https://blog.csdn.net/cr7258/article/details/122028096)
- [GitOps æœ€ä½³å¯¦è¸](https://ithelp.ithome.com.tw/articles/10266761)