---
featured: true
title: ä¸€æ¬¾å…è²»é–‹æºé¡ä¼¼æ–¼ Notion é¡çŸ¥è­˜åº«ç³»çµ± â€” Outline Wiki ä½ˆç½²èˆ‡å‚™ä»½å…¨æ”»ç•¥
date: 2025-06-11 01:01:35 +0800
thumbnail: outline-knowledge-base-system.png
category: Management
tags: ['outline', 'knowledge base system']
description: ä¸€æ¬¾å…è²»é–‹æºé¡ä¼¼æ–¼ Notion é¡çŸ¥è­˜åº«ç³»çµ± â€” Outline Wiki ä½ˆç½²èˆ‡å‚™ä»½å…¨æ”»ç•¥
author: Mark Ku
slug: outline-wiki-knowledge-base-system
---

## èƒŒæ™¯ä»‹ç´¹

åœ¨è¿½æ±‚é«˜æ•ˆè³‡æ–™èˆ‡çŸ¥è­˜å…±äº«çš„éç¨‹ä¸­ï¼Œè¨±å¤šä¼æ¥­å’Œåœ˜éšŠé¢è‡¨å·¥å…·é¸æ“‡çš„æŒ‘æˆ°ã€‚æˆ‘å€‘å˜—è©¦äº†å¤šç¨®çŸ¥è­˜åº«å·¥å…·ï¼Œä½†å¾å·¥ç¨‹å¸«çš„åé¥‹ä¾†çœ‹ï¼Œé€™äº›å·¥å…·ä»å­˜åœ¨ä¸å°‘é™åˆ¶ã€‚ç¶“éå¤šæ–¹è©•ä¼°èˆ‡å°‹æ‰¾ï¼Œæœ€çµ‚ç™¼ç¾ Outline æ˜¯ä¸€æ¬¾éå¸¸é©åˆåœ˜éšŠå”ä½œçš„çŸ¥è­˜åº«è§£æ±ºæ–¹æ¡ˆï¼Œèƒ½æœ‰æ•ˆæå‡å·¥ä½œæ•ˆç‡èˆ‡è³‡è¨Šç®¡ç†ã€‚

---

## ä»€éº¼æ˜¯ Outlineï¼Ÿ

[**Outline**](https://www.getoutline.com/) æ˜¯ä¸€æ¬¾ç°¡æ½”ä¸”åŠŸèƒ½å¼·å¤§çš„çŸ¥è­˜åº«ç®¡ç†å·¥å…·ï¼Œä»‹é¢èˆ‡ä½¿ç”¨é«”é©—é¡ä¼¼ Notionã€‚å®ƒæ”¯æ´ Markdown ç·¨è¼¯ã€å…¨æ–‡æª¢ç´¢ã€ä»¥åŠå¤šç¨®ç¬¬ä¸‰æ–¹ç™»å…¥æ–¹å¼ï¼Œéå¸¸é©åˆä¼æ¥­æˆ–åœ˜éšŠæ­å»ºå…±äº«çŸ¥è­˜åº«ã€‚Outline æ˜¯é–‹æºè»Ÿé«”ï¼ŒåŠŸèƒ½å®Œæ•´ï¼Œå°ˆç‚ºåœ˜éšŠæ‰“é€ ï¼Œèƒ½å¤§å¹…æå‡çŸ¥è­˜ç®¡ç†èˆ‡å”ä½œæ•ˆç‡ã€‚

---

## æ¶è¨­æŒ‡å—ï¼ˆä½¿ç”¨ Docker Compose ç¯„ä¾‹ï¼‰

ä»¥ä¸‹ç‚ºä½¿ç”¨ Docker Compose å¿«é€Ÿæ¶è¨­ Outline çš„ç¯„ä¾‹è¨­å®šï¼š

```yaml
version: '3'

services:
  outline:
    image: outlinewiki/outline:latest
    ports:
      - "27777:3000"
    environment:
      - DATABASE_URL=postgres://postgres:postgres@postgres:5432/outline
      - REDIS_URL=redis://redis:6379
      - SECRET_KEY=ä½ çš„éš¨æ©Ÿå­—ä¸²
      - UTILS_SECRET=ä½ çš„éš¨æ©Ÿå­—ä¸²
      - URL=http://localhost:27777
      - NODE_ENV=production
      - FORCE_HTTPS=false
      - PORT=3000
      - AWS_ACCESS_KEY_ID=minio
      - AWS_SECRET_ACCESS_KEY=minio123
      - AWS_REGION=us-east-1
      - AWS_S3_UPLOAD_BUCKET_URL=http://localhost:9000
      - AWS_S3_UPLOAD_BUCKET_NAME=uploads
      - AWS_S3_FORCE_PATH_STYLE=true
      - AWS_S3_ACL=private
      - AWS_S3_UPLOAD_MAX_SIZE=26214400
      - PGSSLMODE=disable
      - OIDC_CLIENT_ID=ä½ çš„OIDCå®¢æˆ¶ç«¯ID
      - OIDC_CLIENT_SECRET=ä½ çš„OIDCå®¢æˆ¶ç«¯å¯†é‘°
      - OIDC_AUTH_URI=https://github.com/login/oauth/authorize
      - OIDC_TOKEN_URI=https://github.com/login/oauth/access_token
      - OIDC_SCOPES=read:user user:email
      - OIDC_USERINFO_URI=https://api.github.com/user
      - OIDC_USERNAME_CLAIM=name
      - OIDC_DISPLAY_NAME=GitHub
    depends_on:
      - postgres
      - redis
      - minio

  postgres:
    image: postgres:13
    environment:
      - POSTGRES_USER=postgres
      - POSTGRES_PASSWORD=postgres
      - POSTGRES_DB=outline
    volumes:
      - postgres_data:/var/lib/postgresql/data

  redis:
    image: redis:6
    volumes:
      - redis_data:/data

  minio:
    image: minio/minio
    ports:
      - "9000:9000"
      - "9001:9001"
    environment:
      - MINIO_ROOT_USER=minio
      - MINIO_ROOT_PASSWORD=minio123
    volumes:
      - minio_data:/data
    command: server /data --console-address ":9001"

volumes:
  postgres_data:
  redis_data:
  minio_data:
```

å•Ÿå‹•æœå‹™æŒ‡ä»¤ï¼š

```bash
docker-compose up -d
```

P.S. å¦‚æœç„¡æ³•ä¸Šå‚³ Create Bucket > "uplaods"  

```
http://localhost:9001/
```

---

## ğŸšª ç™»å…¥æ–¹å¼èªªæ˜

Outline ä¸æ”¯æ´å¸³å¯†ç™»å…¥ï¼Œåƒ…æ”¯æ´å¤šç¨®ç¬¬ä¸‰æ–¹å¸³è™Ÿç™»å…¥ï¼Œä»¥ä¸‹ç‚ºä¸»è¦é¸é …åŠæ³¨æ„äº‹é …ï¼š

* **Google ç™»å…¥**
  éœ€ä½¿ç”¨ Google Workspaceï¼ˆä¼æ¥­å¸³è™Ÿï¼‰ï¼Œä¸æ”¯æ´å€‹äºº Gmail å¸³è™Ÿã€‚

* **GitHub ç™»å…¥**
  éœ€å…ˆåœ¨ GitHub æˆæ¬Š Outline æ‡‰ç”¨ï¼š[GitHub æ‡‰ç”¨æˆæ¬Šè¨­å®š](https://github.com/settings/applications/3037670)

* **Microsoft ç™»å…¥**
  åƒ…æ”¯æ´ Azure ADï¼ˆä¼æ¥­å¸³è™Ÿï¼‰ï¼Œä¸æ”¯æ´å€‹äºº Microsoft å¸³è™Ÿã€‚  
  [åƒè€ƒè³‡æ–™](https://medium.com/chouhsiang/%E9%96%8B%E7%99%BC%E4%BB%8B%E6%8E%A5azure-ad-1-sso-86d90cdba13)

---

## ä¿®æ­£MinIO åœ–ç‰‡ç„¡æ³•æ­£å¸¸é¡¯ç¤ºå•é¡Œ
### 3. æ–‡ç« åœ–ç‰‡ç„¡æ³•ä¸Šå‚³ï¼Œç™»å…¥ MinIO Web UIï¼Œæ‰‹å‹•å»ºç«‹  Blcket "uploads"
### 4. å¤§é ­ç…§ç„¡æ³•é¡¯ç¤º
```
# 1. é€²å…¥ Minio å®¹å™¨
docker exec -it outline-wiki-minio-1 sh

# 2. è¨­å®š mc åˆ¥å
mc alias set myminio http://localhost:9000 minio minio123

# 3. è¨­å®š uploads bucket ç‚ºåŒ¿åå¯è®€
mc anonymous set download myminio/uploads

# 4. æª¢æŸ¥è¨­å®šæ˜¯å¦æˆåŠŸ
mc anonymous get myminio/uploads

# 5. é›¢é–‹å®¹å™¨
exit
```

## ğŸ’¾ è³‡æ–™å‚™ä»½è¦é»

Outline ä¸»è¦åŒ…å«å…©éƒ¨åˆ†è³‡æ–™ï¼š

1. **PostgreSQL è³‡æ–™åº«**ï¼šå„²å­˜é é¢å…§å®¹ã€ä½¿ç”¨è€…è³‡è¨ŠåŠç‰ˆæœ¬æ­·å²
2. **MinIO å„²å­˜ç©ºé–“**ï¼šå­˜æ”¾æ‰€æœ‰ä½¿ç”¨è€…ä¸Šå‚³çš„åœ–ç‰‡åŠæª”æ¡ˆï¼Œç›¸ç•¶æ–¼æœ¬åœ°ç«¯çš„ Amazon S3

---

## è¨ªå•
```
http://localhost:27777/
```
![ç·¨è¼¯ç•«é¢](screenshot.png)

## å°bug 
ç™»å‡ºå¾Œï¼Œéœ€è¦é—œé–‰ç€è¦½å™¨é ç±¤æ‰æœ‰è¾¦æ³•é‡æ–°ç™»å…¥ã€‚

## âœ… å‚™ä»½

### Step 1ï¼šå‚™ä»½ PostgreSQL è³‡æ–™åº«

```bash
docker exec -t $(docker ps -qf name=postgres) pg_dump -U postgres outline > outline_backup.sql
```

> **æ³¨æ„ï¼š**
>
> * åŒ¯å‡ºæª”æ¡ˆç‚º SQL æ ¼å¼ï¼Œæœƒå­˜æ”¾æ–¼åŸ·è¡Œç›®éŒ„ã€‚
> * è‹¥å®¹å™¨åç¨±é `postgres`ï¼Œè«‹ä½¿ç”¨ `docker ps` æŸ¥è©¢ä¸¦æ›¿æ›ã€‚

---

### Step 2ï¼šå‚™ä»½ MinIO è³‡æ–™

```bash
docker run --rm -v minio_data:/volume -v $(pwd):/backup alpine tar czf /backup/minio_backup.tar.gz -C /volume .
```

> **æ³¨æ„ï¼š**
>
> * æœƒå°‡ MinIO volume å…§æ‰€æœ‰æª”æ¡ˆå£“ç¸®ç‚º `.tar.gz`ã€‚
> * `minio_data` ç‚º MinIO çš„ volume åç¨±ï¼Œè«‹ä¾å¯¦éš›æƒ…æ³èª¿æ•´ã€‚

---

## â™»ï¸ é‚„åŸæµç¨‹

### é‚„åŸ PostgreSQL è³‡æ–™åº«

```bash
cat outline_backup.sql | docker exec -i $(docker ps -qf name=postgres) psql -U postgres -d outline
```

### é‚„åŸ MinIO è³‡æ–™

```bash
docker run --rm -v minio_data:/volume -v $(pwd):/backup alpine sh -c "cd /volume && tar xzf /backup/minio_backup.tar.gz"
```

---

é€™æ¨£å…§å®¹å°±å®Œå…¨èšç„¦åœ¨ Outlineï¼Œä¸”ç§»é™¤äº† Wiki.js çš„æ‰€æœ‰å­—çœ¼ã€‚éœ€è¦æˆ‘å¹«ä½ èª¿æ•´å°é¢åœ–ç‰‡å‘½åæˆ–å…¶ä»–ç´°ç¯€å—ï¼Ÿ
