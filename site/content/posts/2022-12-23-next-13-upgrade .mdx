---
featured: true
title: NEXTJS 13 昇級筆記
date:  2022-12-23 01:01:01 +0800
thumbnail: nextjs.png
category: Frontend
tags: ['React','Next','upgrade']
description : NEXTJS 13 昇級筆記
author : Mark Ku
slug: next-13-upgrade
---

# NEXTJS 13 昇級筆記
## 前言
下午將公司專案從 NEXT 12 昇到 NEXT 13，NEXT 版更真的很快，在NEXT 13 替大家帶來了
* 採用新的建置網頁的技術 Turbopack (Rust based)，提昇網站建置的效能 ( 依據官方數據，快至少3倍 )
* 簡化 next/link 撰寫方式 => 自己長 a 標籤，不需要像過去還要包個 a 標籤
* 重寫 next/image => 並優化圖片載入效能，並移除 layout屬性，強制要求填寫  alt 屬性。
* NEXT Font => 載入 google 字型更容易
* [開始支援非同步的伺服器元件](https://zhuanlan.zhihu.com/p/579068537)
* 修正一些框架上的 bug
* 但因 NEXT JS 13 的Image 移除的 layout，我們很多頁面，目前用了會跑版，所以仍用舊的next image (next/legacy/image)，逐步去昇級，如果有新寫程式，或改到舊的，請逐步改成新的 next/image。

##　實測建置效能
實測網站建置 (npm run build) ,將近快了1倍
NEXT JS 12 local build 1 分 40 秒  
NEXT JS 13 local build 56 秒  
昇級 NEXT JS 13，有明顯渲染頁面效能上的改善。

## Next Image
新寫法，每個image，Image 強制一定要加 alt 不然會爆錯
```
import Image from 'next/image';
```
P.S. 相容舊寫法(不推薦，新的 next image 有重寫，優化一些東西)

```
import Image from next/legacy/image
```
 
###  Next.js 12
```
<Link href="/about">
  <a>About</a>
</Link>
```

### Next.js 13
```
<Link href="/about">
  About
</Link>
```
P.S. 修改 next config ，可維持 next 12寫法(不推薦，因為修正了連結的錯誤)

```
 experimental: {
       newNextLinkBehavior: false,
 },
```
